{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Campus Facultad - Pasantías, Tesis e Investigaciones</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../static/home.css">
  <link rel="icon" href="../../media/Logo-Universidad-del-Cauca-vertical-1.png">
</head>
<body>


      <header style="display: flex; align-items: center; padding: 0; justify-content: space-between; height: 150px;">
    
    <div style="display: flex; align-items: center; padding: 0; gap: 10%; width: 90%;">
      <div>
        <img style="height: 150px; color: white;" src="../../media/Logo-Universidad-del-Cauca-e1715273370946.png" alt="">
      </div>
      <div class="text-center" style="background:#ffffff00; color:#fff;">
        <h1 class="mb-0">Facultad de Ingenieria Civil</h1>
        <small>Trabajos de Grado</small>
      </div>
    </div>

    <nav class="navbar navbar-expand-lg" style="background:#000066;">
      <div class="container-fluid">
        <button class="navbar-toggler text-white" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMenu">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarMenu">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle text-white" href="#" role="button" data-bs-toggle="dropdown">
                Opciones
              </a>
              <ul class="dropdown-menu dropdown-menu-end">
                <li><a class="dropdown-item" href="{% url 'estudiantes' %}">Listado de estudiantes</a></li>
                <li><a class="dropdown-item" href="{% url 'home' %}">Listado de proyectos</a></li>
                
                {% if user.is_superuser %}
                <li><a class="dropdown-item text-primary" href="{% url 'gestionar_usuarios' %}">Gestionar Usuarios</a></li>
                {% endif %}

                <li>
                  <hr class="dropdown-divider">
                </li>
                <li><a class="dropdown-item text-danger" href="{% url 'logout' %}">Cerrar sesión</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>
 </header>


      <div class="container-xl">
    <div class="card shadow-lg rounded-4">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h2 class="mb-0" style="color: black;">Listado de profesores</h2>
          
          {% if user.is_staff or user.is_superuser %}
          <button class="btn d-flex align-items-center justify-content-center" 
                  style="background-color: #0d6efd; color: #fff;"
                  data-bs-toggle="modal" data-bs-target="#addModal">
            Agregar
          </button>
          {% endif %}
        </div>
        
        <div class="table-responsive">
          <table id="datatable" class="table table-bordered table-hover align-middle" style="width:100%">
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Departamento</th>
                <th>Facultad</th>
                <th>Email</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
            {% for docente in docentes %}
              <tr>
                <td>{{ docente.nombre }}</td>
                <td>{{ docente.departamento }}</td>
                <td>{{docente.facultad}}</td>
                <td>{{docente.email}}</td>
                <td>
                
                {% if user.is_staff or user.is_superuser %}
                <div class="btn-group">
                  <button class="btn btn-modificar btn-sm"
                          style="background-color: #ffc107; color: #fff;"
                          data-bs-toggle="modal"
                          data-id="{{ docente.id }}"
                          data-nombre="{{ docente.nombre }}"
                          data-departamento="{{ docente.departamento }}"
                          data-facultad="{{ docente.facultad }}"
                          data-email="{{ docente.email }}"
                          data-bs-target="#editModal">
                    MODIFICAR
                  </button>
                  <button class="btn btn-eliminar btn-sm" data-bs-toggle="modal" data-bs-target="#deleteModal" data-id="{{ docente.id }}">ELIMINAR</button>
                </div>
                {% else %}
                  <span class="badge bg-secondary">Solo Lectura</span>
                {% endif %}

                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>


  <div class="modal fade" id="addModal" tabindex="-1" aria-labelledby="addModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content" style="border-radius: 15px;">
      
      <div class="modal-header" style="background-color: #a81f17; color: #fff;">
        <h5 class="modal-title" id="addModalLabel">Agregar Nuevo Registro</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      
      <div class="modal-body">
        <form method="post" action="{% url 'agregar_docente' %}">
            {% csrf_token %}
          <div class="row g-3">
            <div class="col-md-4">
              <label class="form-label">Nombre</label>
              <input name="nombre" type="text" class="form-control" placeholder="Nombre completo">
            </div>
            <div class="col-md-4">
              <label class="form-label">Departamento</label>
              <input name="departamento" type="text" class="form-control" placeholder="Departamento">
            </div>
            <div class="col-md-6">
              <label class="form-label">Facultad</label>
              <input name="facultad" type="text" class="form-control" placeholder="Facultad">
            </div>
            <div class="col-md-6">
              <label class="form-label">Email</label>
              <input name="email" type="email" class="form-control" placeholder="Email del profesor">
            </div>
          </div>
                <div class="modal-footer">
              <button type="button" class="btn" data-bs-dismiss="modal" style="background-color: #dc3545;       color: #ffffff;">
              Cancelar
              </button>
              <button type="submit" class="btn" style="background-color: #0d6efd; color: #fff;">
              Guardar
              </button>
          </div>
        </form>
      </div>
      
    </div>
  </div>
</div>


<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content" style="border-radius: 15px;">

      <div class="modal-header" style="background-color: #a81f17; color: #fff;">
        <h5 class="modal-title" id="deleteModalLabel">Confirmar Eliminación</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>

      <div class="modal-body" style="color: #4b161f; font-size: 16px;">
        ¿Estás seguro que deseas eliminar este registro?
        <br><small class="text-muted">Esta acción no se puede deshacer.</small>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn" data-bs-dismiss="modal" style="background-color: #dc3545; color: #ffffff;">
          Cancelar
        </button>

        <form id="deleteForm" method="post" action="">
          {% csrf_token %}
          <button type="submit" class="btn" style="background-color: #0d6efd; color: #fff;">
            Confirmar
          </button>
        </form>
      </div>

    </div>
  </div>
</div>


<div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content" style="border-radius: 15px;">
      
      <div class="modal-header" style="background-color: #000066; color: #fff;">
        <h5 class="modal-title" id="editModalLabel">Modificar Registro</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      
      <div class="modal-body">
        <form id="editForm" method="post" action="">
          {% csrf_token %}
          <div class="row g-3">
            <div class="col-md-4">
              <label class="form-label">Nombre</label>
              <input id="editNombre" type="text" class="form-control" name="nombre" required>
            </div>
            <div class="col-md-4">
              <label class="form-label">Departamento</label>
              <input id="editDepartamento" type="text" class="form-control" name="departamento" required>
            </div>
            <div class="col-md-4">
              <label class="form-label">Facultad</label>
              <input id="editFacultad" type="text" class="form-control" name="facultad" required>
            </div>
            <div class="col-md-6">
              <label class="form-label">Email</label>
              <input id="editEmail" type="email" class="form-control" name="email" required>
            </div>
          </div>

          <div class="modal-footer mt-4">
            <button type="button" class="btn" data-bs-dismiss="modal" style="background-color: #dc3545; color: #ffffff;">
              Cancelar
            </button>
            <button type="submit" class="btn" style="background-color: #0d6efd; color: #fff;">
              Guardar cambios
            </button>
          </div>
        </form>
      </div>

    </div>
  </div>
</div>


    
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
  <script src="../static/js/home.js"></script>


<script src="../static/js/docentes.js" ></script>


</body>
</html>